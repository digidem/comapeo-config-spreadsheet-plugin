{"id":"CC-1","title":"Revamp CoMapeo menu and workflows","description":"High-level plan to restructure the spreadsheet add-on menu, consolidate translation features, refine icon generation, address linting noise, and update help messaging. Tracks the set of related subtasks needed to modernize the UX.","design":"Execution plan and parallelization guidance:\n\n1. Finalize CC-5 (Reset lint highlights) — currently in progress; complete this to stabilize lint feedback before other UI changes.\n2. Tackle CC-2 (Restructure main menu/entry points) — establishes the menu order and labels the later work relies on.\n3. Once CC-2 lands, run the following in parallel streams:\n   • Stream A: CC-3 (Merge translation dialog with custom language management) — depends on updated menu labels/flows.\n   • Stream B: CC-4 (Harden Generate Icons workflow) — logic-level improvements that do not overlap with dialog/menu work, can proceed concurrently after CC-2.\n4. After Streams A and B converge, update the user-facing guidance in CC-6 (Simplify help dialog copy) so the help text matches the new menu labels, translation flow, and icon behavior.\n\nParallel notes:\n- CC-3 and CC-4 touch different areas (dialog vs. icon pipeline) so they can be staffed simultaneously once CC-2 is merged.\n- CC-6 should wait for CC-2 and CC-3 to avoid rework in the instructions. Icons copy updates from CC-4 can be folded in during CC-6 if needed.\n- Continue to reference CC-1 for any cross-cutting UX adjustments discovered mid-stream; add follow-up subtasks if new gaps emerge.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-10-16T15:23:48.744738212+07:00","updated_at":"2025-10-16T15:59:56.333704835+07:00","dependencies":[{"issue_id":"CC-1","depends_on_id":"CC-2","type":"parent-child","created_at":"2025-10-16T15:24:13.579600457+07:00","created_by":"luandro"}]}
{"id":"CC-10","title":"Generate translation sheet headers from primary language metadata","description":"Update `applyTranslations` to:\n- Resolve the configured primary language name/code for the first column header instead of hard-coding \"English\".\n- Skip the primary language code when building additional headers and display user-friendly labels like \"Spanish (es)\".\n- Ensure row lookups still work after the header change and add basic logging or tests that cover duplicate-language regressions.","notes":"Execution order: 2/4. Depends on CC-9; updates translation sheet headers once payloads are normalized.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-16T15:48:53.769962096+07:00","updated_at":"2025-10-17T10:02:14.641692107+07:00","closed_at":"2025-10-17T10:02:14.641692107+07:00"}
{"id":"CC-11","title":"Align translation sheet writers with parsed data","description":"Harden `applyTranslations` row builders so helper text columns pull from `field.helperText`, option columns accept both string and object translations, and missing values fall back cleanly. Cover these scenarios with manual or automated checks so imports from nested translation archives populate all three sheets consistently.","notes":"Execution order: 3/4. Depends on CC-9; can run alongside CC-10 once header logic is stable to align row writers.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-16T15:49:10.639783937+07:00","updated_at":"2025-10-17T10:02:22.803371757+07:00","closed_at":"2025-10-17T10:02:22.803371757+07:00"}
{"id":"CC-12","title":"Verify translation import with sample .mapeosettings archive","description":"Import `src/test/mapeo-default-min.mapeosettings` (and a flat-key export) through the spreadsheet menu to confirm:\n- Category, helper text, and option sheets populate with translated values.\n- Headers match the primary language name plus one column per additional language code.\nDocument the verification steps in `docs/import.md` or the relevant test README so future regressions can be reproduced quickly.","notes":"Execution order: 4/4. Run after CC-9 through CC-11 to verify the full translation import flow with sample archives.","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-16T15:49:30.629192834+07:00","updated_at":"2025-10-16T16:15:44.381162333+07:00"}
{"id":"CC-2","title":"Restructure main menu and generation entry points","description":"- Reorder the spreadsheet add-on menu so the primary export appears first, translations management second, and debug/raw build at the bottom.\n- Update labels to reflect the new flows and ensure `generateCoMapeoCategory` runs the zip-only pipeline without surfacing the translation dialog.\n- Rename the debug action to make the raw Drive build behavior clear and keep it available as a troubleshooting option.\n- Verify button wiring after the change.","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-16T15:24:02.434936955+07:00","updated_at":"2025-10-16T15:24:02.434936955+07:00","dependencies":[{"issue_id":"CC-2","depends_on_id":"CC-1","type":"parent-child","created_at":"2025-10-16T15:24:28.63695054+07:00","created_by":"luandro"}]}
{"id":"CC-3","title":"Merge translation dialog with custom language management","description":"- Replace the separate \"Add Custom Languages\" dialog with controls embedded in the translation language picker so users select stock and custom languages in one flow.\n- Ensure custom languages are added across all translation sheets before translation runs, and only the languages the user selects are created to avoid empty columns.\n- Update the dialog copy and menu label to reflect the combined experience.\n- Add guards/tests so the pipeline still works when no translation languages are chosen.","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-16T15:24:48.007682139+07:00","updated_at":"2025-10-16T15:24:48.007682139+07:00","dependencies":[{"issue_id":"CC-3","depends_on_id":"CC-1","type":"parent-child","created_at":"2025-10-16T15:24:55.295009463+07:00","created_by":"luandro"}]}
{"id":"CC-4","title":"Harden Generate Icons workflow","description":"- Audit `generateIconsConfig` and `processIcons` for assumptions about Drive permissions and folder structure; add friendly error handling when parent folders cannot be created or files cannot be removed.\n- Clarify how category slugs are derived so existing icon links are preserved when the sheet already supplies a slug/URL, and surface warnings when a fallback icon replaced a user-provided asset.\n- Reduce redundant icon API calls and surface a summary dialog listing any categories that failed to generate icons.\n- Add logging or lightweight tests that cover shared-drive and existing-icon scenarios.","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-16T15:25:05.567714969+07:00","updated_at":"2025-10-16T15:25:05.567714969+07:00","dependencies":[{"issue_id":"CC-4","depends_on_id":"CC-1","type":"parent-child","created_at":"2025-10-16T15:25:11.939781167+07:00","created_by":"luandro"}]}
{"id":"CC-5","title":"Reset lint highlights to avoid stale warnings","description":"- Modify `lintSheet` so it clears previous background formatting before marking required-field warnings, preventing cells from staying yellow after they are fixed.\n- Confirm the change works on the Details sheet and other linted sheets that highlight required fields.\n- Update or add unit/integration coverage if available to guard against regressions.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-16T15:25:23.245038703+07:00","updated_at":"2025-10-16T15:34:12.691182563+07:00","closed_at":"2025-10-16T15:34:12.691182563+07:00","dependencies":[{"issue_id":"CC-5","depends_on_id":"CC-1","type":"parent-child","created_at":"2025-10-16T15:25:30.990912908+07:00","created_by":"luandro"}]}
{"id":"CC-6","title":"Simplify help dialog copy","description":"- Rewrite the English and Spanish help dialog steps to focus on the streamlined workflow: edit data, translate/manage languages, generate icons (optional), lint, and export.\n- Remove references to deprecated options (e.g., project key) and keep the language short and accessible.\n- Validate the new HTML snippets with the existing dialog sanitizer.","status":"open","priority":2,"issue_type":"task","created_at":"2025-10-16T15:25:40.446428228+07:00","updated_at":"2025-10-16T15:25:40.446428228+07:00","dependencies":[{"issue_id":"CC-6","depends_on_id":"CC-1","type":"parent-child","created_at":"2025-10-16T15:25:50.577554439+07:00","created_by":"luandro"}]}
{"id":"CC-7","title":"Clear resolved lint styling after validation passes","description":"## Problem\nWhen `lint.ts` marks problems it calls `setBackground`, `setFontColor`, and `setNote` in several helpers (e.g. `checkForDuplicates`, `checkUnreferencedDetails`, `validateTranslationHeaders`, `validateCategoryIcons`). Once the underlying data is fixed and lint runs again, those stylings are never cleared, so cells stay highlighted even though the issue is gone. We only reset the required-column highlight inside `lintSheet`, leaving the rest of the warnings stale.\n\n## Notes from code review\n- `checkForDuplicates` (src/lint.ts:123) paints duplicate values red.\n- `checkUnreferencedDetails` (src/lint.ts:170) yellows the Details name column.\n- `validateTranslationHeaders` (src/lint.ts:321) colors invalid headers.\n- `validateCategoryIcons` (src/lint.ts:636) sets icon column background + notes.\n- The category validations at `lintCategoriesSheet` also call `setBackground`/`setFontColor` without ever clearing previous runs.\n\n## Proposal\n1. Introduce a lint formatting manager that resets known lint ranges before reapplying warnings. For each sheet, define which columns/rows need clearing (background, font color, notes) and run it before validations.\n2. Update helpers to register highlighted cells via the manager so we can both clear stale styles and ensure colors remain consistent.\n3. Remove residual notes when icon issues resolve.\n4. Add regression coverage (Apps Script tests or a mocked lint runner) to ensure a second lint pass clears formatting when data is fixed.\n\n## Acceptance criteria\n- Running lint twice in a row after fixing an issue clears the previous highlight/note on all affected sheets.\n- No regression to existing linting behavior or performance.\n- Tests or a documented manual verification plan cover the clear-then-reapply flow.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-16T15:45:46.961876745+07:00","updated_at":"2025-10-16T15:56:40.193724692+07:00","closed_at":"2025-10-16T15:56:40.193724692+07:00"}
{"id":"CC-8","title":"Restore imported translation data from Mapeo settings archives","description":"Translations imported from `.mapeosettings` / `.comapeocat` files currently land in empty sheets with duplicate \"English / en\" headers. When the archive already contains nested translation structures, our parser wipes them and `applyTranslations` cannot resolve friendly headers.\n\nGoal: make translation imports populate correctly for all supported archive formats, with clean headers and stable option/helper text handling.","status":"open","priority":2,"issue_type":"epic","created_at":"2025-10-16T15:48:20.889023919+07:00","updated_at":"2025-10-16T15:48:20.889023919+07:00","dependencies":[{"issue_id":"CC-8","depends_on_id":"CC-9","type":"parent-child","created_at":"2025-10-16T15:48:43.405651716+07:00","created_by":"luandro"},{"issue_id":"CC-8","depends_on_id":"CC-10","type":"parent-child","created_at":"2025-10-16T15:49:01.963981651+07:00","created_by":"luandro"},{"issue_id":"CC-8","depends_on_id":"CC-11","type":"parent-child","created_at":"2025-10-16T15:49:19.069810695+07:00","created_by":"luandro"},{"issue_id":"CC-8","depends_on_id":"CC-12","type":"parent-child","created_at":"2025-10-16T15:49:40.888150393+07:00","created_by":"luandro"}]}
{"id":"CC-9","title":"Support nested and flat translation payloads during import parsing","description":"Expand `restructureTranslations` so it:\n- Detects when a language entry is already nested (e.g. `presets.presets`, `presets.fields`) and copies it without erasing data.\n- Normalizes flat keys (`presets.foo.name`, `fields.bar.helperText`, options) into the expected nested structure.\n- Coerces option values into `{ label, value }` objects so downstream sheet writers can rely on `.label`.\n\nAdd unit/manual verification steps covering both archive formats (flat exported translations vs. nested bundled translations).","notes":"Execution order: 1/4. Normalizes translation payloads so downstream sheet writers get consistent data.","status":"closed","priority":2,"issue_type":"task","created_at":"2025-10-16T15:48:34.024674644+07:00","updated_at":"2025-10-17T10:02:05.890093836+07:00","closed_at":"2025-10-17T10:02:05.890093836+07:00"}
